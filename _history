{"entries":[{"timestamp":1758767498484,"editorVersion":"2.0.56","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":1190,"diffs":[[1," "]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":230,"length1":45,"diffs":[[1,"    \"languageRestriction\": \"javascript-only\",\n    \"additionalFilePaths\": []\n"]]}]}]},{"timestamp":1758768098061,"editorVersion":"2.0.56","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":104,"length1":56,"diffs":[[1,"    constructor() {\r\n"]]},{"start1":149,"length1":44,"diffs":[[1,""]]},{"start1":158,"length1":105,"diffs":[[1,"    __update() {\r\n        \r\n"]]},{"start1":312,"length1":63,"diffs":[[1,"       \r\n"]]},{"start1":632,"length1":148,"diffs":[[1,"        })\r\n"]]},{"start1":1172,"length1":161,"diffs":[[1,""]]},{"start1":1188,"length1":1376,"diffs":[[1,"} "]]}]}]},{"timestamp":1758768715153,"editorVersion":"2.0.56","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1404,"length1":101,"diffs":[[1,"              const follow = new sprites.FollowingSprite(sprite, otherSprite, undefined, undefined)\r\n"]]}]}]},{"timestamp":1758768737826,"editorVersion":"2.0.56","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":529,"length1":348,"diffs":[[1,""]]},{"start1":531,"length1":67,"diffs":[[1,""]]},{"start1":562,"length1":65,"diffs":[[1,"            if(sprite.x <= otherSprite.x || sprite.x >= otherSprite.x) sprite._x = sprite._lastX \r\n            if(sprite.y <= otherSprite.y || sprite.y >= otherSprite.y) sprite._y = sprite._lastY            \r\n   \r\n"]]},{"start1":977,"length1":477,"diffs":[[1,""]]},{"start1":999,"length1":2,"diffs":[[1,""]]},{"start1":1063,"length1":224,"diffs":[[1,""]]},{"start1":1404,"length1":101,"diffs":[[1,"              const follow = new sprites.FollowingSprite(sprite, otherSprite, sprite.vx, undefined)\r\n"]]},{"start1":1699,"length1":3,"diffs":[[1,"\r\n"]]},{"start1":2364,"length1":31,"diffs":[[1,""]]}]}]},{"timestamp":1758769064848,"editorVersion":"2.0.56","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":654,"length1":410,"diffs":[[1,"             if (sprite.x <= otherSprite.x || sprite.x >= otherSprite.x) sprite._x = sprite._lastX\r\n             if (sprite.y <= otherSprite.y || sprite.y >= otherSprite.y) sprite._y = sprite._lastY\r\n         }\r\n"]]},{"start1":4016,"length1":56,"diffs":[[1,"const flag = new SpriteCollisionsEngine(enemy, player)\r\n"]]}]}]},{"timestamp":1758769633460,"editorVersion":"2.0.56","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":104,"length1":2,"diffs":[[1,""]]},{"start1":237,"length1":141,"diffs":[[1,""]]},{"start1":412,"length1":108,"diffs":[[1,""]]},{"start1":575,"length1":253,"diffs":[[1,""]]},{"start1":2230,"length1":53,"diffs":[[1,"      if(this.flags & SpriteFlag.DisableFollow) {\r\n"]]},{"start1":2685,"length1":134,"diffs":[[1,""]]}]}]},{"timestamp":1758770229032,"editorVersion":"2.0.56","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":555,"length1":255,"diffs":[[1,""]]},{"start1":826,"length1":0,"diffs":[[1,"     \r\n     // for smooth accuration horizontal and vertical collision movement \r\n     const xDiff = Fx.sub(\r\n         sprite._x,\r\n         sprite._lastX\r\n     )\r\n\r\n     const yDiff = Fx.sub(\r\n         sprite._y,\r\n         sprite._lastY\r\n     )\r\n     \r\n"]]},{"start1":3502,"length1":423,"diffs":[[1,""]]}]}]},{"timestamp":1758770905179,"editorVersion":"2.0.56","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":3934,"length1":0,"diffs":[[1,"let player = sprites.create(img`\r\n    . . . . . . . . . . b 5 b . . .\r\n    . . . . . . . . . b 5 b . . . .\r\n    . . . . . . . . . b c . . . . .\r\n    . . . . . . b b b b b b . . . .\r\n    . . . . . b b 5 5 5 5 5 b . . .\r\n    . . . . b b 5 d 1 f 5 5 d f . .\r\n    . . . . b 5 5 1 f f 5 d 4 c . .\r\n    . . . . b 5 5 d f b d d 4 4 . .\r\n    b d d d b b d 5 5 5 4 4 4 4 4 b\r\n    b b d 5 5 5 b 5 5 4 4 4 4 4 b .\r\n    b d c 5 5 5 5 d 5 5 5 5 5 b . .\r\n    c d d c d 5 5 b 5 5 5 5 5 5 b .\r\n    c b d d c c b 5 5 5 5 5 5 5 b .\r\n    . c d d d d d d 5 5 5 5 5 d b .\r\n    . . c b d d d d d 5 5 5 b b . .\r\n    . . . c c c c c c c c b b . . .\r\n`, SpriteKind.Player)\r\nplayer.x = 0\r\ncontroller.moveSprite(player)\r\n\r\nlet enemy = sprites.create(img`\r\n    . . . . . . . . . . b 5 b . . .\r\n    . . . . . . . . . b 5 b . . . .\r\n    . . . . . . b b b b b b . . . .\r\n    . . . . . b b 5 5 5 5 5 b . . .\r\n    . . . . b b 5 d 1 f 5 d 4 c . .\r\n    . . . . b 5 5 1 f f d d 4 4 4 b\r\n    . . . . b 5 5 d f b 4 4 4 4 b .\r\n    . . . b d 5 5 5 5 4 4 4 4 b . .\r\n    . . b d d 5 5 5 5 5 5 5 5 b . .\r\n    . b d d d d 5 5 5 5 5 5 5 5 b .\r\n    b d d d b b b 5 5 5 5 5 5 5 b .\r\n    c d d b 5 5 d c 5 5 5 5 5 5 b .\r\n    c b b d 5 d c d 5 5 5 5 5 5 b .\r\n    . b 5 5 b c d d 5 5 5 5 5 d b .\r\n    b b c c c d d d d 5 5 5 b b . .\r\n    . . . c c c c c c c c b b . . .\r\n`, SpriteKind.Enemy)\r\n\r\nconst flag = new SpriteCollisionsEngine(player, enemy)\r\n"]]}]}]},{"timestamp":1758770910448,"editorVersion":"2.0.56","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":2,"length1":39,"diffs":[[1,"    \"name\": \"Sprite Collisions Demo - Copy\",\n"]]},{"start1":205,"length1":44,"diffs":[[1,""]]}]},{"type":"added","filename":"test.ts","value":"// tests go here; this will not be compiled when this package is used as an extension.\n"},{"type":"added","filename":"main.blocks","value":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <variables></variables>\n  <block type=\"pxt-on-start\" x=\"0\" y=\"0\"></block>\n</xml>"}]}],"snapshots":[{"timestamp":1758767498483,"editorVersion":"2.0.56","text":{"main.ts":" ","README.md":" ","assets.json":"","pxt.json":"{\n    \"name\": \"Sprite Collisions Demo\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\",\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1758769363055,"editorVersion":"2.0.56","text":{"main.ts":"enum SpriteFlag {\r\n    DisableFollow = 1 << 14\r\n}\r\n\r\nclass SpriteCollisionsEngine {\r\n    flags: number\r\n    constructor(sprite: Sprite, otherSprite: Sprite) {\r\n        this.flags = 0\r\n        this.__update(sprite, otherSprite)\r\n    }\r\n\r\n    __update(sprite: Sprite, otherSprite: Sprite) {\r\n        this.spriteCollisions(sprite, otherSprite)\r\n    }\r\n\r\n    spriteCollisions(sprite: Sprite, otherSprite: Sprite) {\r\n        sprite.setFlag(SpriteFlag.DisableFollow, true)\r\n        otherSprite.setFlag(SpriteFlag.DisableFollow, true)\r\n      // for updating the sprite collisions \r\n       game.onUpdate(() => {\r\n         if(sprite.overlapsWith(otherSprite)) {\r\n             if (sprite.x <= otherSprite.x || sprite.x >= otherSprite.x) sprite._x = sprite._lastX\r\n             if (sprite.y <= otherSprite.y || sprite.y >= otherSprite.y) sprite._y = sprite._lastY\r\n         }\r\n       })\r\n\r\n     // for disabling the follow for keeping the game not crashed\r\n        game.onUpdate(() => {\r\n            // this is for disabling it from the other sprite  \r\n            this.__disableFollow(SpriteKind.Player, otherSprite)\r\n            this.__disableFollow(SpriteKind.Enemy, otherSprite)\r\n            this.__disableFollow(SpriteKind.Projectile, otherSprite)\r\n            this.__disableFollow(SpriteKind.Food, otherSprite)\r\n            this.__disableFollow(undefined, otherSprite)\r\n            // maybe unncessary but just for extra case\r\n            this.__disableFollow(SpriteKind.Player, sprite)\r\n            this.__disableFollow(SpriteKind.Enemy, sprite)\r\n            this.__disableFollow(SpriteKind.Projectile, sprite)\r\n            this.__disableFollow(SpriteKind.Food, sprite)\r\n            this.__disableFollow(undefined, sprite)\r\n        }) \r\n    }\r\n\r\n\r\n    __disableFollow(spriteKind: number, otherSprite: Sprite) {\r\n     // I did it on purpose if it is on or off it is disabled because I do not want the game crash, but if some reson you found it to work it will throw an error to tell you the big issue you have it really can follow you.\r\n      if(this.flags & SpriteFlag.DisableFollow) {\r\n          for (const sprite of sprites.allOfKind(spriteKind)) {\r\n              const follow = new sprites.FollowingSprite(sprite, otherSprite, 0, 0)\r\n          }\r\n      } else if(!(this.flags & (SpriteFlag.DisableFollow))){\r\n          for (const sprite of sprites.allOfKind(spriteKind)) {\r\n              const follow = new sprites.FollowingSprite(sprite, otherSprite, undefined, undefined)\r\n          }\r\n      } else {\r\n          throw \"Do not use follow it can make the game crash and collisions are wrong, instead use positions and velocities and acclerations.\"\r\n      }\r\n    }\r\n} \r\n \r\nlet player = sprites.create(img`\r\n    . . . . . . . . . . b 5 b . . .\r\n    . . . . . . . . . b 5 b . . . .\r\n    . . . . . . . . . b c . . . . .\r\n    . . . . . . b b b b b b . . . .\r\n    . . . . . b b 5 5 5 5 5 b . . .\r\n    . . . . b b 5 d 1 f 5 5 d f . .\r\n    . . . . b 5 5 1 f f 5 d 4 c . .\r\n    . . . . b 5 5 d f b d d 4 4 . .\r\n    b d d d b b d 5 5 5 4 4 4 4 4 b\r\n    b b d 5 5 5 b 5 5 4 4 4 4 4 b .\r\n    b d c 5 5 5 5 d 5 5 5 5 5 b . .\r\n    c d d c d 5 5 b 5 5 5 5 5 5 b .\r\n    c b d d c c b 5 5 5 5 5 5 5 b .\r\n    . c d d d d d d 5 5 5 5 5 d b .\r\n    . . c b d d d d d 5 5 5 b b . .\r\n    . . . c c c c c c c c b b . . .\r\n`, SpriteKind.Player)\r\nplayer.x = 0\r\ncontroller.moveSprite(player)\r\n\r\nlet enemy = sprites.create(img`\r\n    . . . . . . . . . . b 5 b . . .\r\n    . . . . . . . . . b 5 b . . . .\r\n    . . . . . . b b b b b b . . . .\r\n    . . . . . b b 5 5 5 5 5 b . . .\r\n    . . . . b b 5 d 1 f 5 d 4 c . .\r\n    . . . . b 5 5 1 f f d d 4 4 4 b\r\n    . . . . b 5 5 d f b 4 4 4 4 b .\r\n    . . . b d 5 5 5 5 4 4 4 4 b . .\r\n    . . b d d 5 5 5 5 5 5 5 5 b . .\r\n    . b d d d d 5 5 5 5 5 5 5 5 b .\r\n    b d d d b b b 5 5 5 5 5 5 5 b .\r\n    c d d b 5 5 d c 5 5 5 5 5 5 b .\r\n    c b b d 5 d c d 5 5 5 5 5 5 b .\r\n    . b 5 5 b c d d 5 5 5 5 5 d b .\r\n    b b c c c d d d d 5 5 5 b b . .\r\n    . . . c c c c c c c c b b . . .\r\n`, SpriteKind.Enemy)\r\n\r\nconst flag = new SpriteCollisionsEngine(enemy, player)\r\n","README.md":" ","assets.json":"","pxt.json":"{\n    \"name\": \"Sprite Collisions Demo - Copy\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\"\n}\n"}}],"shares":[],"lastSaveTime":1758770949724}